# MLSpace Lambda Backend

## Tests
Unit tests for all lambdas can be found in the `test/` directory which each subdirectory corresponding to a folder in `src/ml_space_lambda`. Unlike the lambdas, tests are generally broken out into individual files for each individual lambda handler ie `test_create_project.py`, `test_delete_project.py`, `test_get_project.py`. Tests leverage mock, moto, and pytest depending on what exactly is being tested. The private/public key pair in `test/authorizer/` are solely for testing authorization token signature validation and are not intended to be used to secure anything in a production application. As of the current release MLSpace has 97% code coverage for the lambdas, the tests can be executed and a coverage report can be generated by running the following command:

### Running all the tests
You can run all the tests and generate a coverage report with the following command:
```
pytest -s -v --html=test-reports/report.html \
    --self-contained-html \
    --cov=ml_space_lambda \
    --cov-report=xml:coverage.xml \
    --junitxml=test-reports/junit.xml \
    --log-file=test-reports/logs.txt \
    test
```

Single tests can be run with a command similar to the following:
```
pytest -s test/resource_metadata/test_process_events.py -k "test_process_event_upsert[notebook_event]"
```

## Additional Notes
The current deployment method is to deploy the entire codebase to each lambda as opposed to limiting what is deployed to just the code needed by that lambda. Switching to only deploy the necessary code (and moving common objects to a layer) would be a small change but given the existing small codebase and the ease in debugging afforded by including the entire code base the decision was made to not optimize for code size at this time.